<!DOCTYPE html>
<html class="light" lang="es">
<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <title>Registrar Nuevo Trabajo</title>
  <link href="https://fonts.googleapis.com" rel="preconnect" />
  <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
  <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@400;500;600;700&amp;display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  <script id="tailwind-config">
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          colors: {
            "primary": "#ecb613",
            "background-light": "#fcfcfc",
            "background-dark": "#221d10",
            "primary-green": "#386641",
            "accent-yellow": "#FFB900",
            "background-beige": "#F2E8CF",
            "text-dark": "#1F2937",
            "text-light": "#6B7280",
            "border-light": "#D1D5DB",
          },
          fontFamily: {
            "display": ["Lexend", "sans-serif"]
          },
          borderRadius: {
            "DEFAULT": "0.5rem",
            "lg": "0.75rem",
            "xl": "1rem",
            "full": "9999px"
          },
        },
      },
    }
  </script>
  <style type="text/tailwindcss">
    @layer base {
      body {
        @apply font-display bg-background-light dark:bg-background-dark text-text-dark dark:text-gray-200;
      }
      .form-input {
        @apply h-14 rounded-lg border-border-light focus:ring-primary-green focus:border-primary-green;
      }
      .material-symbols-outlined {
        font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
      }
    }
    .segmented-control input:checked + label {
      @apply bg-primary-green text-white;
    }
    /* Estilo para el botón deshabilitado */
    button:disabled {
        @apply bg-gray-300 dark:bg-gray-600 cursor-not-allowed;
    }
  </style>
  <style>
    body {
      min-height: max(884px, 100dvh);
    }
  </style>
</head>
<body class="bg-background-light dark:bg-background-dark">
  <div class="relative flex h-auto min-h-screen w-full flex-col group/design-root overflow-x-hidden">
    <header class="flex items-center bg-background-light dark:bg-background-dark p-4 pb-2 justify-between sticky top-0 z-10 border-b border-gray-200 dark:border-gray-800">
             <a href="Registros.html" class="p-2 rounded-full hover:bg-surface-light dark:hover:bg-surface-dark">
            <span class="material-symbols-outlined">arrow_back</span>
        </a>
      <h1 class="text-lg font-bold leading-tight tracking-tight flex-1 text-center pr-12 text-text-dark dark:text-gray-200">Registrar Nuevo Trabajo</h1>
    </header>
    <main class="flex-1 flex flex-col p-4">
      <!-- Indicador de Progreso -->
      <div class="flex w-full flex-row items-center justify-center gap-2 py-5">
        <div id="progress-step-1" class="flex items-center gap-2">
          <div class="h-6 w-6 rounded-full bg-primary-green flex items-center justify-center text-white text-sm font-bold">1</div>
          <span class="text-primary-green font-semibold">General</span>
        </div>
        <div class="flex-1 h-0.5 bg-border-light dark:bg-gray-700"></div>
        <div id="progress-step-2" class="flex items-center gap-2">
          <div class="h-6 w-6 rounded-full bg-border-light dark:bg-gray-700 flex items-center justify-center text-text-light dark:text-gray-400 text-sm font-bold">2</div>
          <span class="text-text-light dark:text-gray-400">Acción</span>
        </div>
        <div class="flex-1 h-0.5 bg-border-light dark:bg-gray-700"></div>
        <div id="progress-step-3" class="flex items-center gap-2">
          <div class="h-6 w-6 rounded-full bg-border-light dark:bg-gray-700 flex items-center justify-center text-text-light dark:text-gray-400 text-sm font-bold">3</div>
          <span class="text-text-light dark:text-gray-400">Animales</span>
        </div>
      </div>
      <div class="flex flex-col space-y-6">
        <!-- Step 1: Información General -->
        <section id="step-1" class="flex flex-col gap-4">
          <h2 class="text-xl font-bold leading-tight tracking-tight text-text-dark dark:text-gray-200">Paso 1: Información General</h2>
          <div class="flex flex-col">
            <label class="text-base font-medium leading-normal pb-2" for="work-date">Fecha del trabajo</label>
            <div class="relative flex w-full items-stretch rounded-lg">
              <input class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-text-dark dark:text-gray-200 focus:outline-0 focus:ring-2 focus:ring-primary-green/50 border border-border-light dark:border-gray-600 bg-white dark:bg-gray-800 placeholder:text-text-light dark:placeholder:text-gray-500 p-3.5 pr-12" id="work-date" type="text" value="24 / 07 / 2024" />
              <div class="absolute right-0 top-0 h-full text-text-light dark:text-gray-400 flex items-center justify-center pr-3.5">
                <span class="material-symbols-outlined text-2xl">calendar_today</span>
              </div>
            </div>
          </div>
          <div class="flex flex-col">
            <label class="text-base font-medium leading-normal pb-2" for="establishment">Establecimiento</label>
            <select class="form-select form-input w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-text-dark dark:text-gray-200 focus:outline-0 focus:ring-2 focus:ring-primary-green/50 border border-border-light dark:border-gray-600 bg-white dark:bg-gray-800 p-3.5" id="establishment">
              <option>El Trébol</option>
              <option>La Escondida</option>
              <option>San José</option>
            </select>
          </div>
          <div class="flex flex-col">
            <label class="text-base font-medium leading-normal pb-2" for="herd">Rodeo</label>
            <select class="form-select form-input w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-text-dark dark:text-gray-200 focus:outline-0 focus:ring-2 focus:ring-primary-green/50 border border-border-light dark:border-gray-600 bg-white dark:bg-gray-800 p-3.5" id="herd">
              <option>Rodeo General</option>
              <option>Vaquillonas</option>
              <option>Toros</option>
            </select>
          </div>
        </section>
        
        <!-- Step 2: Acción a Realizar (Inicialmente deshabilitado) -->
        <section id="step-2" class="flex flex-col gap-4 opacity-50 pointer-events-none" hidden>
          <h2 class="text-xl font-bold leading-tight tracking-tight text-text-dark dark:text-gray-200">Paso 2: Acción a Realizar</h2>
          <div>
            <p class="text-base font-medium leading-normal pb-2">Seleccione la acción</p>
            <div class="segmented-control grid grid-cols-3 gap-2 rounded-lg bg-gray-100 dark:bg-gray-800 p-1">
              <input class="sr-only" id="sanidad" name="action" type="radio" />
              <label class="flex cursor-pointer items-center justify-center rounded-md p-2.5 text-sm font-semibold text-text-light transition-colors" for="sanidad">Sanidad</label>
              <input class="sr-only" id="alimentacion" name="action" type="radio" />
              <label class="flex cursor-pointer items-center justify-center rounded-md p-2.5 text-sm font-semibold text-text-light transition-colors" for="alimentacion">Alimentación</label>
              <input class="sr-only" id="pesaje" name="action" type="radio" />
              <label class="flex cursor-pointer items-center justify-center rounded-md p-2.5 text-sm font-semibold text-text-light transition-colors" for="pesaje">Pesaje</label>
              <input class="sr-only" id="movimiento" name="action" type="radio" />
              <label class="flex cursor-pointer items-center justify-center rounded-md p-2.5 text-sm font-semibold text-text-light transition-colors" for="movimiento">Movimiento</label>
              <input checked="" class="sr-only" id="otros" name="action" type="radio" />
              <label class="col-span-2 flex cursor-pointer items-center justify-center rounded-md p-2.5 text-sm font-semibold text-text-light transition-colors" for="otros">Otros</label>
            </div>
          </div>
          <div class="flex flex-col">
            <label class="text-base font-medium leading-normal pb-2" for="details">Especifique los detalles de la acción</label>
            <textarea class="form-textarea form-input w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-text-dark dark:text-gray-200 focus:outline-0 focus:ring-2 focus:ring-primary-green/50 border border-border-light dark:border-gray-600 bg-white dark:bg-gray-800 placeholder:text-text-light dark:placeholder:text-gray-500 p-3.5" id="details" placeholder="Ej: Vacunación contra aftosa" rows="3"></textarea>
          </div>
        </section>
        
        <!-- Step 3: Selección de Animales (Inicialmente deshabilitado) -->
        <section id="step-3" class="flex flex-col gap-4 opacity-50 pointer-events-none" hidden>
          <h2 class="text-xl font-bold leading-tight tracking-tight text-text-dark dark:text-gray-200">Paso 3: Selección de Animales</h2>
          <p class="text-base text-text-light dark:text-gray-400">¿A qué animales desea aplicar esta acción?</p>
          <div class="flex flex-col gap-4">
            <!-- Opción 1: Todo el rodeo -->
            <div>
              <input type="radio" name="animal-selection" id="select-all" class="sr-only peer" checked />
              <label for="select-all" class="flex items-center justify-center gap-3 w-full rounded-lg border-2 p-6 text-center font-semibold transition-all duration-150 ease-in-out cursor-pointer hover:scale-[1.02] border-primary-green bg-primary-green/10 text-primary-green dark:bg-primary-green/20 dark:text-green-300 peer-checked:bg-primary-green peer-checked:text-white peer-checked:shadow-lg">
                <span class="material-symbols-outlined text-3xl">groups</span>
                <span class="text-lg">Aplicar a todo el rodeo</span>
              </label>
            </div>
            <!-- Opción 2: Selección individual -->
            <div>
              <input type="radio" name="animal-selection" id="select-individual" class="sr-only peer" />
              <label for="select-individual" class="flex items-center justify-center gap-3 w-full rounded-lg border-2 p-6 text-center font-semibold transition-all duration-150 ease-in-out cursor-pointer hover:scale-[1.02] border-primary-green bg-primary-green/10 text-primary-green dark:bg-primary-green/20 dark:text-green-300 peer-checked:bg-primary-green peer-checked:text-white peer-checked:shadow-lg">
                <span class="material-symbols-outlined text-3xl">person</span>
                <span class="text-lg">Seleccionar individualmente</span>
              </label>
            </div>
          </div>
        </section>
      </div>
    </main>
    <footer class="sticky bottom-0 bg-background-light dark:bg-background-dark p-4 border-t border-gray-200 dark:border-gray-800">
      <div class="flex items-center justify-between gap-4">
        <button id="btn-back" class="w-1/3 rounded-lg py-3.5 text-center font-bold text-text-light dark:text-gray-400 bg-gray-200 dark:bg-gray-700" disabled>Atrás</button>
        <button id="btn-next" class="w-2/3 rounded-lg bg-primary-green py-3.5 text-center font-bold text-white">Siguiente</button>
      </div>
    </footer>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      let currentStep = 1;
      const totalSteps = 3;

      const btnBack = document.getElementById('btn-back');
      const btnNext = document.getElementById('btn-next');
      const steps = [
        document.getElementById('step-1'),
        document.getElementById('step-2'),
        document.getElementById('step-3')
      ];
      const progressSteps = [
        document.getElementById('progress-step-1'),
        document.getElementById('progress-step-2'),
        document.getElementById('progress-step-3')
      ];

      const updateView = () => {
        // Habilitar el paso actual y anteriores, deshabilitar los futuros
        steps.forEach((step, index) => {
          if (index + 1 <= currentStep) {
            // Habilitar
            step.classList.remove('opacity-50', 'pointer-events-none');
          } else {
            // Deshabilitar
            step.classList.add('opacity-50', 'pointer-events-none');
          }
          // Mostrar solo el paso actual
          step.hidden = (index + 1 !== currentStep);
        });

        // Actualizar el indicador de progreso visual
        progressSteps.forEach((progressStep, index) => {
          const stepNumber = progressStep.querySelector('div');
          const stepLabel = progressStep.querySelector('span');
          
          if (index + 1 < currentStep) { // Pasos completados
            stepNumber.classList.add('bg-primary-green', 'text-white');
            stepNumber.classList.remove('bg-border-light', 'dark:bg-gray-700', 'text-text-light', 'dark:text-gray-400');
            stepLabel.classList.add('text-primary-green', 'font-semibold');
            stepLabel.classList.remove('text-text-light', 'dark:text-gray-400');
          } else if (index + 1 === currentStep) { // Paso actual
            stepNumber.classList.add('bg-primary-green', 'text-white');
            stepNumber.classList.remove('bg-border-light', 'dark:bg-gray-700', 'text-text-light', 'dark:text-gray-400');
            stepLabel.classList.add('text-primary-green', 'font-semibold');
            stepLabel.classList.remove('text-text-light', 'dark:text-gray-400');
          } else { // Pasos futuros
            stepNumber.classList.remove('bg-primary-green', 'text-white');
            stepNumber.classList.add('bg-border-light', 'dark:bg-gray-700', 'text-text-light', 'dark:text-gray-400');
            stepLabel.classList.remove('text-primary-green', 'font-semibold');
            stepLabel.classList.add('text-text-light', 'dark:text-gray-400');
          }
        });

        // Actualizar los botones de navegación
        btnBack.disabled = (currentStep === 1);
        btnNext.textContent = (currentStep === totalSteps) ? 'Finalizar' : 'Siguiente';
      };
      
      btnNext.addEventListener('click', () => {
        if (currentStep < totalSteps) {
          currentStep++;
          updateView();
        } else {
          // Lógica para enviar el formulario o finalizar
          alert('¡Trabajo registrado con éxito!');
        }
      });

      btnBack.addEventListener('click', () => {
        if (currentStep > 1) {
          currentStep--;
          updateView();
        }
      });

      // Inicializar la vista al cargar la página
      updateView();
    });
  </script>
</body>
</html>